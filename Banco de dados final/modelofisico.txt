COMMENT DROP TABLE tb_imagens_prod;
COMMENT DROP TABLE tb_pedidos_prod;
COMMENT DROP TABLE tb_produtos; 
COMMENT DROP TABLE tb_pedidos;
COMMENT DROP TABLE tb_enderecos;
COMMENT DROP TABLE tb_categorias;
COMMENT DROP TABLE tb_cidades;
COMMENT DROP TABLE tb_clientes;

CREATE TABLE IF NOT EXISTS tb_clientes (
   codcliente INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   nomecli VARCHAR(50) NOT NULL COMMENT 'nome do cliente',
   telefonecli BIGINT(11) NOT NULL COMMENT 'telefone do cliente',
   cpfcli BIGINT(12) NOT NULL COMMENT 'cpf do cliente',
   senhacli VARCHAR(32) NOT NULL COMMENT 'senha do cliente',
   usuariocli VARCHAR(50) NOT NULL COMMENT 'usuario do cliente',
   emailcli VARCHAR(150) NOT NULL COMMENT 'email do cliente',
   tipocadastro VARCHAR(1) NOT NULL DEFAULT 'C' COMMENT 'identificação ADM ou cliente',
   ativo VARCHAR(1) NOT NULL DEFAULT 'S' COMMENT 'se o cliente é ativo ou não',
   CONSTRAINT tipocadastro CHECK (tipocadastro IN ('A','C')),
   CONSTRAINT ativo CHECK (ativo IN ('S','N')),
   PRIMARY KEY (codcliente)
);

CREATE TABLE IF NOT EXISTS tb_cidades (
   codcidade INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   nomecid VARCHAR(50) NOT NULL COMMENT 'nome da cidade',
   estadocid VARCHAR(2) NOT NULL COMMENT 'estado da cidade',
   PRIMARY KEY (codcidade)
);

CREATE TABLE IF NOT EXISTS tb_categorias (
   codcategoria INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   descricaocat VARCHAR(255) NOT NULL COMMENT 'descrição do produto',
   PRIMARY KEY (codcategoria)
);

CREATE TABLE IF NOT EXISTS tb_enderecos (
   codendereco INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   cepend INT NOT NULL COMMENT 'cep cliente',
   numeroend INT NOT NULL COMMENT 'numero casa cliente',
   bairroend VARCHAR(100) NOT NULL COMMENT 'bairro cliente',
   ruaend VARCHAR(100) NOT NULL COMMENT 'rua casa cliente',
   complementoend VARCHAR(255) NULL COMMENT 'apartamento cliente',
   fk_codcidade INT NOT NULL COMMENT 'endereço do cliente',
   fk_codcliente INT NOT NULL COMMENT 'cidade do cliente',
   PRIMARY KEY (codendereco),
   CONSTRAINT fk_tb_enderecos_tb_cidades1
     FOREIGN KEY (fk_codcidade)
     REFERENCES tb_cidades (codcidade),
   CONSTRAINT fk_tb_enderecos_tb_clientes1
     FOREIGN KEY (fk_codcliente)
     REFERENCES tb_clientes (codcliente)
);

CREATE TABLE IF NOT EXISTS tb_pedidos (
   codpedido INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   codtransporte VARCHAR(50) NULL COMMENT 'codigo pedido transportadora',
   tipoped VARCHAR(1) NOT NULL DEFAULT 'E' COMMENT 'produto entrega correio ou retirada',
   pagamento VARCHAR(1) NOT NULL DEFAULT 'P' COMMENT 'confirmação do pagamento',
   valor_entrega FLOAT(5,2) NOT NULL COMMENT 'valor da entrega',
   fk_codcliente INT NOT NULL COMMENT 'cliente que está comprando',
   CONSTRAINT tipoped CHECK (tipoped IN ('E','R')),
   CONSTRAINT pagamento CHECK (pagamento IN ('P','D')),
   PRIMARY KEY (codpedido),
   CONSTRAINT fk_tb_pedidos_tb_clientes1
     FOREIGN KEY (fk_codcliente)
     REFERENCES tb_clientes (codcliente)
);

CREATE TABLE IF NOT EXISTS tb_produtos (
   codproduto INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   nomeprod VARCHAR(60) NOT NULL COMMENT 'nome do produto',
   precoprod FLOAT(5,2) NOT NULL COMMENT 'preço do produto',
   tamanhoprod FLOAT(4,2) NOT NULL COMMENT 'tamanho do produto',
   pesoprod FLOAT(5,3) NOT NULL COMMENT 'peso do produto',
   descricaoprod VARCHAR(255) NOT NULL COMMENT 'descrição do produto',
   ativo VARCHAR(1) NULL DEFAULT 'S' COMMENT 'se o produto é ativo ou não',
   fk_codcategoria INT NOT NULL COMMENT 'categoria do produto',
   CONSTRAINT ativo CHECK (ativo IN ('S','N')),
   PRIMARY KEY (codproduto),
   CONSTRAINT fk_tb_produtos_tb_categorias1
     FOREIGN KEY (fk_codcategoria)
     REFERENCES tb_categorias (codcategoria)
);

CREATE TABLE IF NOT EXISTS tb_pedidos_prod (
   codpedido_prod INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
   fk_codpedido INT NOT NULL COMMENT 'identificação tabela',
   fk_codproduto INT NOT NULL COMMENT 'identificação tabela',
   precoped FLOAT(5,2) NOT NULL COMMENT 'preço pedido',
   quantidadeped FLOAT(3,3) NULL COMMENT 'quantidade pedido',
   PRIMARY KEY (codpedido_prod),
   CONSTRAINT fk_tb_pedidos_has_tb_produtos_tb_pedidos1
     FOREIGN KEY (fk_codpedido)
     REFERENCES tb_pedidos (codpedido),
   CONSTRAINT fk_tb_pedidos_has_tb_produtos_tb_produtos1
     FOREIGN KEY (fk_codproduto)
     REFERENCES tb_produtos (codproduto)
);

CREATE TABLE IF NOT EXISTS tb_imagens_prod (
  codimagem INT NOT NULL AUTO_INCREMENT COMMENT 'identificação tabela',
  produtoimg VARCHAR(255) NOT NULL COMMENT 'imagens produtos',
  fk_codproduto INT NOT NULL COMMENT 'produto escolhido',
  PRIMARY KEY (codimagem),
CONSTRAINT fk_tb_imagens_prod_tb_produtos1
    FOREIGN KEY (fk_codproduto)
    REFERENCES tb_produtos (codproduto)
);

COMMIT;
