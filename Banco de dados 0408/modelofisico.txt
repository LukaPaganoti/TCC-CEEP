-- DROP TABLE tb_imagens_prod, tb_pedidos_prod, tb_pedidos, tb_pedidos, tb_enderecos, tb_categorias, tb_cidades, tb_clientes;

CREATE TABLE IF NOT EXISTS tb_clientes (
   codcliente INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   nomecli VARCHAR(50) NOT NULL, -- nome do cliente
   telefonecli BIGINT(11) NOT NULL, -- telefone do cliente
   cpfcli BIGINT(12) NOT NULL, -- cpf do cliente
   senhacli VARCHAR(32) NOT NULL, -- senha do cliente
   usuariocli VARCHAR(50) NOT NULL, -- usuario do cliente
   emailcli VARCHAR(150) NOT NULL, -- email do cliente
   tipocadastro VARCHAR(1) NOT NULL DEFAULT 'C', -- identificação ADM ou cliente
   ativo VARCHAR(1) NOT NULL DEFAULT 'S', -- se o cliente é ativo ou não
   CONSTRAINT tipocadastro CHECK (tipocadastro IN ('A','C')),
   CONSTRAINT ativo CHECK (ativo IN ('S','N')),
   PRIMARY KEY (codcliente)
);

CREATE TABLE IF NOT EXISTS tb_cidades (
   codcidade INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   nomecid VARCHAR(50) NOT NULL, -- nome da cidade
   estadocid VARCHAR(2) NULL, -- estado da cidade
   PRIMARY KEY (codcidade)
);

CREATE TABLE IF NOT EXISTS tb_categorias (
   codcategoria INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   descricaocat VARCHAR(255) NOT NULL, -- descrição do produto
   PRIMARY KEY (codcategoria)
);

CREATE TABLE IF NOT EXISTS tb_enderecos (
   codendereco INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   cepend INT NOT NULL, -- cep cliente
   numeroend INT NOT NULL, -- numero casa cliente
   bairroend VARCHAR(100) NOT NULL, -- bairro cliente
   ruaend VARCHAR(100) NOT NULL, -- rua casa cliente
   complementoend VARCHAR(255) NULL, -- apartamento cliente
   fk_codcidade INT NOT NULL, -- endereço do cliente
   fk_codcliente INT NOT NULL, -- cidade do cliente
   PRIMARY KEY (codendereco),
   CONSTRAINT fk_tb_enderecos_tb_cidades1
     FOREIGN KEY (fk_codcidade)
     REFERENCES tb_cidades (codcidade),
   CONSTRAINT fk_tb_enderecos_tb_clientes1
     FOREIGN KEY (fk_codcliente)
     REFERENCES tb_clientes (codcliente)
);

CREATE TABLE IF NOT EXISTS tb_pedidos (
   codpedido INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   codtransporte VARCHAR(50) NULL, -- codigo pedido transportadora
   tipoped VARCHAR(1) NOT NULL DEFAULT 'E', -- produto entrega correio ou retirada
   pagamento VARCHAR(1) NOT NULL DEFAULT 'P', -- confirmação do pagamento
   valor_entrega FLOAT(5,2) NOT NULL, -- valor da entrega
   fk_codcliente INT NOT NULL, -- cliente que está comprando
   CONSTRAINT tipoped CHECK (tipoped IN ('E','R')),
   CONSTRAINT pagamento CHECK (pagamento IN ('P','D')),
   PRIMARY KEY (codpedido),
   CONSTRAINT fk_tb_pedidos_tb_clientes1
     FOREIGN KEY (fk_codcliente)
     REFERENCES tb_clientes (codcliente)
);

CREATE TABLE IF NOT EXISTS tb_produtos (
   codproduto INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   nomeprod VARCHAR(60) NOT NULL, -- nome do produto
   precoprod FLOAT(5,2) NOT NULL, -- preço do produto
   tamanhoprod FLOAT(4,2) NOT NULL, -- tamanho do produto
   pesoprod FLOAT(5,3) NOT NULL, -- peso do produto
   descricaoprod VARCHAR(255) NOT NULL, -- descrição do produto
   ativo VARCHAR(1) NULL DEFAULT 'S', -- se o produto é ativo ou não
   fk_codcategoria INT NOT NULL, -- categoria do produto
   CONSTRAINT ativo CHECK (ativo IN ('S','N')),
   PRIMARY KEY (codproduto),
   CONSTRAINT fk_tb_produtos_tb_categorias1
     FOREIGN KEY (fk_codcategoria)
     REFERENCES tb_categorias (codcategoria)
);

CREATE TABLE IF NOT EXISTS tb_pedidos_prod (
   codpedido_prod INT NOT NULL AUTO_INCREMENT, -- identificação tabela
   fk_codpedido INT NOT NULL, -- identificação tabela
   fk_codproduto INT NOT NULL, -- identificação tabela
   precoped FLOAT(5,2) NOT NULL, -- preço pedido
   quantidadeped FLOAT(3,3) NULL, -- quantidade pedido
   PRIMARY KEY (codpedido_prod),
   CONSTRAINT fk_tb_pedidos_has_tb_produtos_tb_pedidos1
     FOREIGN KEY (fk_codpedido)
     REFERENCES tb_pedidos (codpedido),
   CONSTRAINT fk_tb_pedidos_has_tb_produtos_tb_produtos1
     FOREIGN KEY (fk_codproduto)
     REFERENCES tb_produtos (codproduto)
);

CREATE TABLE IF NOT EXISTS tb_imagens_prod (
  codimagem INT NOT NULL AUTO_INCREMENT, -- identificação tabela
  produtoimg VARCHAR(255) NOT NULL, -- imagens produtos
  fk_codproduto INT NOT NULL, -- produto escolhido
  PRIMARY KEY (codimagem),
CONSTRAINT fk_tb_imagens_prod_tb_produtos1
    FOREIGN KEY (fk_codproduto)
    REFERENCES tb_produtos (codproduto));

COMMIT;

INSERT INTO tb_categorias VALUES (1, 'Quadros coloridos grandes'), (2, 'Quadros coloridos médio'),
(3, 'Quadros coloridos pequenos'), (4, 'Quadros preto e branco grandes'), (5, 'Quadros preto e branco médio'),
(6, 'Quadros preto e branco pequenos'), (7, 'Marca páginas coloridos'), (8, 'Marca páginas preto e branco'),
(9, 'Chaveiros coloridos'), (10, 'Chaveiros preto e branco');

INSERT INTO tb_clientes VALUES (1, 'Laisa Assis (teste)', 45998476271, 12345678901, '123teste', 'Laisa Assis', 'laisaassisteste@gmail.com', 'C', 'S'), (2, 'Vitor Hugo (teste)', 45984137132, 12345678901, '1234teste' 'Vitor Hugo', 'vitorhugoteste@gmail.com', 'C', 'S'); (4, 'Sabrina Sandri (teste)', 45999353396, 12345678901, '12345teste', 'Sabrina Sandri', 'sabrinateste@gmail.com', 'C', 'S'); (5, 'Lucas Eduardo (teste)', 45991170168, 12345678901, '123teste', 'Lucas Eduardo', 'lucaseduardo@gmail.com', 'C', 'S'); (6, 'Luka Paganoti Farias', 45998073523, 12759755932, 'CheshaNeko1', 'Luka', 'bendrownedstudios@gmail.com', 'A', 'S');

INSERT INTO tb_enderecos VALUES (1, 85804150, 888, '14 de Novembro', 'Rua Tenente José Firmino',
'casa da frente, verde', 2853, 1), (2, 85802290, 230, 'Neva', 'Rua Primeiro de Maio',
'na frente da igreja evangelica', 2853, 1); 

INSERT INTO tb_pedidos VALUES (1, 'SD367379461BR', 'E', 'P', 27.59, 1), (2, 'SD352745340BR', 'E', 'P', 79.02, 1);

INSERT INTO tb_produtos VALUES (1, 'Quadro Demon Slayer', 120.00, 30.42, 1.000, 
'Quadro Demon Slayer Nezuko', 'S', 1);

INSERT INTO tb_pedidos_produtos VALUES (1, 1, 1, 147.59, 0.002), (2, 2, 1, 147.59, 0.200);

INSERT INTO tb_imagens_prod VALUES (1, 'https://www.google.com/search?rlz=1C1GCEA_enBR1064BR1064&q=
nezuko&tbm=isch&sa=X&ved=2ahUKEwih3NHRov3_AhUTBLkGHdVlDL4Q0pQJegQIChAB&biw=
1536&bih=746&dpr=1.25#imgrc=Z7JdZsACThW1wM', 1);

-- DROP TABLE 
